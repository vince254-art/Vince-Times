<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('partials/head') %>
  <title>Gallery Manager | VinceTimes</title>
</head>
<body>
  <%- include('partials/navbar') %>

  <main class="container">
    <h1>Gallery Management</h1>

    <form method="POST" action="/admin/gallery/upload" enctype="multipart/form-data">
      <form-input type="file" name="media" required>
      <form-input type="text" name="title" placeholder="Title" required>
      <textarea name="caption" rows="2" placeholder="Caption (optional)"></textarea>
      <button type="submit">Upload</button>
    </form>

    <div class="media-grid">
      <% gallery.forEach(item => { %>
        <div class="media-item">
          <img src="<%= item.url %>" alt="<%= item.title %>">
          <p><strong><%= item.title %></strong></p>
          <p><%= item.caption %></p>
          <a href="/admin/gallery/edit/<%= item.id %>">Edit</a>
          <form method="POST" action="/admin/gallery/delete/<%= item.id %>" onsubmit="return confirm('Delete this media?')">
            <button type="submit">Delete</button>
          </form>
        </div>
      <% }) %>
    </div>
  </main>

  <%- include('partials/footer') %>
</body>
</html>
